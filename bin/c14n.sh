#!/bin/bash

# { "type": "Feature", "properties": { "gml_id": "PREDEFINED.fid--465e737_16334e2d659_-55f", "INSPIREID": 58962970, "LABEL": 58962970, "NATIONALCADASTRALREFERENCE": 58962970, "VALIDFROM": "2017-10-04T23:00:00Z", "BEGINLIFESPANVERSION": "2017-10-05T09:32:14.304Z" }, "geometry": { "type": "Polygon", "coordinates": [ [ [ -0.108027870128427, 51.487129153316459 ], [ -0.107980162845166, 51.487109013550558 ], [ -0.107881156869532, 51.487141920575283 ], [ -0.107783056218218, 51.487174527385662 ], [ -0.107678748198522, 51.487209201154677 ], [ -0.107726829816212, 51.487228996373204 ], [ -0.107830857286469, 51.487194488893422 ], [ -0.107928984132318, 51.48716194541381 ], [ -0.108027870128427, 51.487129153316459 ] ] ] } },

sed -e 's/ //g' \
    -e '/"name":"PREDEFINED",/d'\
    -e '/^"crs"/d'\
    -e 's/"properties":{.*"INSPIREID":\([^,]*\),[^}]*}/"properties":{"area":"landregistry-index:\1"}/'\
    -e 's/\(\.[0-9][0-9][0-9][0-9][0-9][0-9]\)[0-9]*/\1/g'
